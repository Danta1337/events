<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ch1tanda.event.mapper.ConfigMapper">
    <resultMap id="baseResultMap" type="cn.ch1tanda.event.dataobject.ConfigDO">
        <result column="pk_id" property="pkId"/>
        <result column="config_type" property="configType"/>
        <result column="config_key" property="configKey"/>
        <result column="config_value" property="configValue"/>
        <result column="gmt_created" property="gmtCreated"/>
        <result column="gmt_modified" property="gmtModified"/>
        <result column="is_deleted" property="isDeleted"/>
        <result column="remark" property="remark"/>
    </resultMap>

    <sql id="baseColumn">
        `pk_id`, `config_type`, `config_key`, `config_value`, `gmt_created`, `gmt_modified`, `is_deleted`, `remark`
    </sql>

    <sql id="baseCondition">
        <where>
            <if test="pkId != null">
                pk_id = #{pkId}
            </if>
            <if test="configType != null">
                and config_type = #{configType}
            </if>
            <if test="configKey != null">
                and config_key = #{configKey}
            </if>
            <if test="configValue != null">
                and config_value = #{configValue}
            </if>
            <if test="gmtCreated != null">
                and gmt_created = #{gmtCreated}
            </if>
            <if test="gmtModified != null">
                and gmt_modified = #{gmtModified}
            </if>
            <if test="isDeleted != null">
                and is_deleted = #{isDeleted}
            </if>
            <if test="remark != null">
                and remark = #{remark}
            </if>
        </where>
    </sql>

    <insert id="insert">
        INSERT INTO config (`config_type`, `config_key`, `config_value`, `gmt_created`, `gmt_modified`, `is_deleted`, `remark`)
        VALUES (#{configType}, #{configKey}, #{configValue}, #{gmtCreated}, #{gmtModified}, #{isDeleted}, #{remark});
    </insert>

    <select id="selectByPkId" resultType="cn.ch1tanda.event.dataobject.ConfigDO" resultMap="baseResultMap">
        SELECT <include refid="baseColumn"/>
        FROM config
        WHERE pk_id = #{pkId}
        AND is_deleted = 0;
    </select>

    <select id="fullQuery" resultType="cn.ch1tanda.event.dataobject.ConfigDO" resultMap="baseResultMap">
        SELECT <include refid="baseColumn"/>
        FROM config
        <include refid="baseCondition"/>
    </select>

    <select id="pageQuery" resultType="cn.ch1tanda.event.dataobject.ConfigDO" resultMap="baseResultMap">
        SELECT <include refid="baseColumn"/>
        FROM config
        <include refid="baseCondition"/>
        LIMIT #{startPos}, #{rows}
    </select>

</mapper>